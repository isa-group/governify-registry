id: SPU_IO_K01-Contract
version: "0.9.1"
type: agreement
context:
  provider: Accenture
  consumer: SAS
  validity:
    initial: 20141016
  infrastructure:
    designer: "http://designer.sas-devel.governify.io/"
    portal: "http://portal.sas-devel.governify.io/v1/"
    registry: "http://registry.sas-devel.governify.io/agreements/SPU"
  definitions:
    schemas:
      porcentajePTOT:
        description: Porcentaje de penalizacion sobre la facturacion mensual SPU
        type: double
        unit: "%"
      deadline:
        description: Plazo de resolucion de una incidencia
        type: string
        unit: hours
      schedule:
        description: Horario del servicio
        type: string
    scopes:
      SPU:
        priority:
          name: Prioridad
          description: Prioridad de la incidencia
          type: string
          metadata:
            reported: true
        node:
          name: Nodo
          description: Provincia
          type: string
          metadata:
            reported: true
        center:
          name: Centro
          description: Centro
          type: string
          metadata:
            reported: true
        nodeETC:
          name: Nodo ETC
          description: ETCs del nodo
          type: integer
          format: int32
        serviceLine:
          name: LineaServicio
          description: Linea de Servicio
          type: string
          default: "1. Linea servicio de mantenimiento bÃ¡sico"
        activity:
          name: Actividad
          description: Actividad
          type: string
          default: "1.1. Actividad de incidencias"
    logs:
      casdm:
        default: true
        uri: "http://logs-devel.sas-devel.governify.io/api/v10.12/ca-sdm"
        stateUri: "http://logs-devel.sas-devel.governify.io/api/v10.12/ca-sdm/count"
        scopes:
          SPU:
            priority: priority
            node: NODO
            center: CENTRO
      jira:
        uri: "http://logs-devel.sas-devel.governify.io/api/v10.12/jira"
        scopes:
          SPU:
            node: Nodo
terms:
  pricing:
    billing:
      period: "monthly"
      initial: "20160512T103536Z"
      penalties:
        - over:
            porcentajePTOT:
              $ref: "#/context/definitions/schemas/porcentajePTOT"
          aggegatedBy: sum
          groupBy:
            - $ref: "#/context/definitions/scopes/SPU/serviceLine"
            - $ref: "#/context/definitions/scopes/SPU/activity"
  metrics:
    issue_typology:
      schema:
        description: Tipologia de la incidencia
        type: string
      computer: 'http://ppinot.computer.sas-devel.governify.io/api/v1/indicators/issue_typology/'
    issue_source:
      schema:
        description: Origen de la incidencia
        type: string
      computer: 'http://ppinot.computer.sas-devel.governify.io/api/v1/indicators/issue_source/'
    issue_subject:
      schema:
        description: Asunto de la incidencia
        type: string
      computer: 'http://ppinot.computer.sas-devel.governify.io/api/v1/indicators/issue_subject/'
    SPU_IO_K01:
      schema:
        description: Porcentaje incidencias resueltas en plazo
        type: double
        unit: "%"
      computer: "http://ppinot.computer.sas-devel.governify.io/api/v1/indicators/SPU_IO_K01/"
      parameters:
        deadline:
          schema:
            $ref: "#/context/definitions/schemas/deadline"
        schedule:
          schema:
            $ref: "#/context/definitions/schemas/schedule"
      scope:
        SPU:
          $ref: "#/context/definitions/scopes/SPU"
      metadata:
        name: Porcentaje incidencias resueltas en plazo
        description: Porcentaje de incidencias resueltas en plazo respecto del total de incidencias comunicadas.
        kind: Penalizador
        class: Negocio
        reportable: false
  guarantees:
    - id: SPU_IO_K01
      scope:
        priority:
          $ref: "#/context/definitions/scopes/SPU/priority"
        node:
          $ref: "#/context/definitions/scopes/SPU/node"
        serviceLine:
          $ref: "#/context/definitions/scopes/SPU/serviceLine"
        activity:
          $ref: "#/context/definitions/scopes/SPU/activity"
      of:
        - scope:
            priority: P3
            node: '*'
          objective: SPU_IO_K01 >= 95.00
          with:
            SPU_IO_K01:
              deadline: "<= 2"
              schedule: "L-DT00:00-23:59"
          window:
            type: static
            period: monthly
            initial: 20141016
          evidences:
            - $ref: "#/terms/metrics/issue_typology"
            - $ref: "#/terms/metrics/issue_source"
            - $ref: "#/terms/metrics/issue_subject"
          penalties:
            - over:
                porcentajePTOT:
                  $ref: "#/context/definitions/schemas/porcentajePTOT"
              of:
                - value: "-2"
                  condition: "SPU_IO_K01 >= 90.00 && SPU_IO_K01 < 95.00"
                - value: "-3"
                  condition: "SPU_IO_K01 >= 85.00 && SPU_IO_K01 < 90.00"
                - value: "-5"
                  condition: "SPU_IO_K01 >= 0 && SPU_IO_K01 < 85.00"
        - scope:
            priority: P2
            node: '*'
          objective: SPU_IO_K01 >= 90.00
          with:
            SPU_IO_K01:
              deadline: "<= 4"
              schedule: "L-VT08:00-20:00"
          window:
            type: static
            period: monthly
            initial: 20141016
          evidences:
            - $ref: "#/terms/metrics/issue_typology"
            - $ref: "#/terms/metrics/issue_source"
            - $ref: "#/terms/metrics/issue_subject"
          penalties:
            - over:
                porcentajePTOT:
                  $ref: "#/context/definitions/schemas/porcentajePTOT"
              of:
                - value: "-1.5"
                  condition: "SPU_IO_K01 >= 85.00 && SPU_IO_K01 < 90.00"
                - value: "-2"
                  condition: "SPU_IO_K01 >= 80.00 && SPU_IO_K01 < 85.00"
                - value: "-3"
                  condition: "SPU_IO_K01 >= 0 && SPU_IO_K01 < 80.00"
        - scope:
            priority: P1
            node: '*'
          objective: SPU_IO_K01 >= 82.50
          with:
            SPU_IO_K01:
              deadline: "<= 17"
              schedule: "L-VT08:00-20:00"
          window:
            type: static
            period: monthly
            initial: 20141016
          evidences:
            - $ref: "#/terms/metrics/issue_typology"
            - $ref: "#/terms/metrics/issue_source"
            - $ref: "#/terms/metrics/issue_subject"
          penalties:
            - over:
                porcentajePTOT:
                  $ref: "#/context/definitions/schemas/porcentajePTOT"
              of:
                - value: "-0.75"
                  condition: "SPU_IO_K01 >= 77.50 && SPU_IO_K01 < 82.50"
                - value: "-1.25"
                  condition: "SPU_IO_K01 >= 72.50 && SPU_IO_K01 < 77.50"
                - value: "-1.75"
                  condition: "SPU_IO_K01 >= 0 && SPU_IO_K01 < 72.50"